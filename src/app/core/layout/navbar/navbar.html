<header class="command-bar">
  <nav class="command-inner">
    <!-- BRAND -->
    <a routerLink="/" class="brand">
      <!-- ANIMATED SHIELD LOGO SVG -->
      <svg class="brand-logo" viewBox="0 0 40 44" fill="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="shieldGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#4ade80" />
            <stop offset="100%" stop-color="#22c55e" />
          </linearGradient>
          <filter id="glow">
            <feGaussianBlur stdDeviation="2" result="coloredBlur" />
            <feMerge>
              <feMergeNode in="coloredBlur" />
              <feMergeNode in="SourceGraphic" />
            </feMerge>
          </filter>
        </defs>
        <!-- Shield Shape -->
        <path d="M20 2L4 8v12c0 11 6.84 17.6 16 20 9.16-2.4 16-9 16-20V8L20 2z" stroke="url(#shieldGrad)"
          stroke-width="2" fill="rgba(74,222,128,0.1)" filter="url(#glow)" />
        <!-- Lock Icon Inside -->
        <rect x="14" y="16" width="12" height="10" rx="2" stroke="#4ade80" stroke-width="1.5" fill="none" />
        <path d="M16 16v-3a4 4 0 118 0v3" stroke="#4ade80" stroke-width="1.5" fill="none" stroke-linecap="round" />
        <circle cx="20" cy="21" r="1.5" fill="#4ade80" />
        <line x1="20" y1="22.5" x2="20" y2="24" stroke="#4ade80" stroke-width="1.5" stroke-linecap="round" />
      </svg>

      <!-- TEXT -->
      <span class="brand-text">Bharat Security</span>
    </a>

    <!-- DESKTOP NAV -->
    <div class="nav-group desktop">
      <div class="nav-item" (mouseenter)="openServices()" (mouseleave)="closeServices()">
        <button class="nav-link" type="button">Services</button>

        @if (servicesOpen()) {
        <div class="dropdown">
          <span class="dropdown-arrow"></span>
          <a routerLink="/services/web-pentest">Web & App Pentesting</a>
          <a routerLink="/services/mobile-pentest">Mobile Pentesting</a>
          <a routerLink="/services/osint-investigations">OSINT</a>
          <a routerLink="/services/incident-response">Incident Response</a>
          <a routerLink="/services/awareness-training">Training</a>
        </div>
        }
      </div>

      <a routerLink="/case-studies" class="nav-link">Case Studies</a>
      <a routerLink="/about" class="nav-link">About</a>
      <a routerLink="/contact" class="nav-link">Contact</a>
    </div>

    <!-- CTA -->
    <a href="https://client.bharatsecurity.com" class="client-btn desktop" target="_self">
      Existing User
    </a>

    <!-- MOBILE -->
    <button class="hamburger" (click)="toggleMobile()">☰</button>
  </nav>
</header>

<!-- MOBILE MENU -->

<!-- MOBILE MENU -->
@if (mobileOpen()) {
<aside class="mobile-menu" [@mobileMenuAnimation]="mobileOpen() ? '*' : 'void'">
  <button class="close" (click)="toggleMobile()">✕</button>

  <!-- SERVICES (EXPANDABLE) -->
  <button class="mobile-service-toggle" type="button" (click)="toggleServices()">
    Services
    <span class="chevron" [class.open]="servicesOpen()">▾</span>
  </button>

  @if (servicesOpen()) {
  <div class="mobile-sub">
    <a routerLink="/services/web-pentest" (click)="toggleMobile()">Web & App Pentesting</a>
    <a routerLink="/services/mobile-pentest" (click)="toggleMobile()">Mobile Pentesting</a>
    <a routerLink="/services/osint-investigations" (click)="toggleMobile()">OSINT</a>
    <a routerLink="/services/incident-response" (click)="toggleMobile()">Incident Response</a>
    <a routerLink="/services/awareness-training" (click)="toggleMobile()">Training</a>
  </div>
  }

  <a routerLink="/case-studies" (click)="toggleMobile()">Case Studies</a>
  <a routerLink="/about" (click)="toggleMobile()">About</a>
  <a routerLink="/contact" (click)="toggleMobile()">Contact</a>

  <a href="https://client.bharatsecurity.com" class="client-btn"> Existing User </a>
</aside>
}